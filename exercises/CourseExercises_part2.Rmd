---
title: "Exercises part 2"
author: "<YOUR NAME>"
date: "<YOUR DATE>"
output:
  html_document:
    df_print: paged
subtitle: 'Course: DAVuR1'
---

This is the second part of the course exercises that accompany the course.



```{r setup, echo = FALSE, include = FALSE}
## THIS IS SETUP CODE - DO NOT EDIT!!!                    ##
labelerURL <- "https://raw.githubusercontent.com/MichielNoback/davur1/gh-pages/exercises/labeler.R"
source(labelerURL)
labelMaker <- labeler(l1Counter = 3) ## will start section number at 4
```


## `r labelMaker$getSection()` `apply` and its relatives

In this section you will encounter some exercises revolving around the different flavours of apply.

### **`r labelMaker$getExercise()` ** 

On the course website under [Resources](https://michielnoback.github.io/bincourses/course_contents/davur/resources.html) you will find a link to file `whale_selenium.txt`. You could download it into your working directory manually or use `download.file()` to obtain it. However, there is a third way to get its contents without actually downloading it to a file location on your hard drive (or "home location"). You can read it directly using `read.table()` as shown here.


```{r eval=TRUE}
whale_sel_url <- "https://raw.githubusercontent.com/MichielNoback/davur1/gh-pages/exercises/data/whale_selenium.txt"
whale_selenium <- read.table(whale_sel_url,
    header = T,
    row.names = 1)
head(whale_selenium)
```

Note: when you are going to load a file many times it is probably better to store a local copy.

**`r labelMaker$getLetter(reset = T)`** 
Report the means of both columns using `apply()`.

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
Report the standard deviation of both columns, using `apply()`

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
Report the standard error of the mean of both columns, using `apply()` The SEM is calculated as $$\frac{sd}{\sqrt{n}}$$ where $sd$ is the sample standard deviation and $n$ the number of measurements. You should create the function calculating this statistic yourself.

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
Using `apply()`, calculate the ratio of $Se_{tooth} / Se_{liver}$ and attach it to the `whale_selenium` dataframe as column `ratio`. Create a histogram of this ratio.

```{r fig.width = 4.5, fig.height = 3.5}
#<YOUR CODE HERE>
```


**`r labelMaker$getLetter()`** 
Using `print()` and `paste()`, report the mean and the standard deviation of the ratio column, but do this with an inline expression, e.g. an expression embedded in the Rmarkdown paragraph text.


### **`r labelMaker$getExercise()` ** 
This exercise revolves around the `ChickWeight` dataset of the built-in `datasets` package. 

**`r labelMaker$getLetter(reset = T)`** 
Report the number of chickens used in the experiment. 

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
Use `aggregate()` to get the mean weight of the chickens for the different Diets. 

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
Use `coplot()` to plot a panel with weight as function of Time, split over Diet. 

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 

Add a column called `weight_gain` to the dataframe holding values for the weight gain since the last measurement. Take special care with rows marking the boundaries between indivivdual chickens! You could consider using a traditional for loop here.

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 

Split the `weight_gain` column on Diet and report the mean, median and standard deviation for each diet. 
Note, if you were not succesful in the previous question, load and attach the data from file `ChickWeight_weight_gain.Rdata` downloadable from `https://github.com/MichielNoback/davur1/blob/gh-pages/exercises/data/ChickWeight_weight_gain.Rdata` (click on button "Raw" to download and use `load()` to load variable `stored_weight_gain`). 

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 

Create a (single-panel) boxplot for weight gain, split over Diet. Hint: read the `boxplot()` help page!

```{r fig.width = 4.5, fig.height = 3.5}
#<YOUR CODE HERE>
```



### **`r labelMaker$getExercise()` ** 
The [food constituents dataset](https://raw.githubusercontent.com/MichielNoback/davur1/gh-pages/exercises/data/food_constituents.txt) on the course website holds information on ingredients for different foods. Individual foods are simply marked with an id. 

**`r labelMaker$getLetter(reset = T)`** 
Load the data and report the different food categories. 

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
What is the mean energy content of chocolate foods?

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
What is the food category with the highest mean fat content?

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
What food category has the highest mean energy content, and which has the lowest?

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
**Challenge ahead!** Create a boxplot showing the difference in sugar content between drink and solid food.

```{r fig.width = 4.5, fig.height = 3.5}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
Assuming both unsaturated fats and sugar are bad for you, what food category do you consider the worst? Thiink of a means to answer this, explain it and carry it out.

```{r}
#<YOUR CODE HERE>
```




### **`r labelMaker$getExercise()` ** 
This exercise revisits the [GOLDEN GATE AUDUBON SOCIETY](http://goldengateaudubon.org/birding-resources/observations/) dataset. You can download it [here](data/Observations-Data-2014.csv). Load the dataset.

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter(reset = T)`** 
Report the number of observations per `County`. Use both a textual as a barplot representation. With the barplot, you should order the bars according to observation numbers. 

```{r, fig.width = 8, fig.height=5}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
Report the number of observations per `Observer.1` but only for observers with more than 10 observations, ordered from high to low observation count. Use `ordfer()` to achieve this.

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
Which observer has the highest number of observations listed (and how many is that)? 

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
Report the different observed species (using `Common.name`) for each genus. **Challenge: Report only the 5 Genera with the highest number of observed species**.  

```{r}
#<YOUR CODE HERE>
```

**`r labelMaker$getLetter()`** 
**Challenge!** Create a Dataframe holding the number of birds per day (use Date.start) and plot it with date on the x-axis and number of birds on the y-axis. Hint: use `as.Date()` to convert the character date to a real date field. See this page how you can do that [Date Values](http://www.statmethods.net/input/dates.html).


```{r}
#<YOUR CODE HERE>
```


